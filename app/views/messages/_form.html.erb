<!-- Message Input Form -->
<%= form_with model: message, url: chat_room_messages_path(chat_room), class: "flex items-end gap-2" do |f| %>
  <% if chat_room.is_ai_mode? %>
    <div class="flex-shrink-0">
      <span class="inline-flex items-center justify-center w-10 h-10 bg-amber-50 text-amber-500 rounded-xl border border-amber-200 cursor-default" title="Powered by Gemini AI">
        <i class="fa-solid fa-wand-magic-sparkles"></i>
      </span>
    </div>
  <% end %>
  <div class="relative flex-1">
    <%= f.text_area :content,
        rows: 1,
        class: "w-full pl-4 pr-10 py-3 rounded-2xl border-0 bg-gray-100 focus:ring-2 focus:ring-sky-500 focus:bg-white outline-none transition-all resize-none text-sm",
        placeholder: chat_room.is_ai_mode? ? "ถามอะไรก็ได้เกี่ยวกับการเรียน..." : "พิมพ์ข้อความ...",
        autofocus: true,
        data: { action: "keydown->message#submitOnEnter" } %>
    <button type="button" class="absolute right-3 bottom-3 text-gray-400 hover:text-gray-600">
      <i class="fa-regular fa-face-smile"></i>
    </button>
  </div>
  <button type="submit"
          class="flex-shrink-0 w-10 h-10 bg-sky-500 hover:bg-sky-600 text-white rounded-full flex items-center justify-center shadow-md active:scale-90 transition-transform">
    <i class="fa-solid fa-paper-plane text-xs"></i>
  </button>
<% end %>
